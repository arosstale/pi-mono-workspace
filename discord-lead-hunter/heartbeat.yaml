enabled: true
schedule:
  cron: "*/30 * * * *"  # Every 30 minutes
  timezone: "UTC"

workflow:
  - step: scan
    skill: "skills/scan-discord.ts"
    config:
      servers:
        - "discord-gg/discord"
        - "discord-gg/python-projects"
        - "discord-gg/ai-research"
      channels:
        - "looking-for-help"
        - "questions"
        - "help"
        - "support"
      keywords:
        - "looking for"
        - "need help with"
        - "agency"
        - "developer"
        - "agent"
      limit: 10
      filter:
        userMustHaveAsked: true
      log: true

  - step: score
    skill: "skills/score-lead.ts"
    config:
      threshold: 0.6
      trackReasons: true

  - step: save
    skill: "skills/save-lead.ts"
    config:
      database: "leads.db"
      fields:
        - discordHandle
        - userId
        - content
        - score
        - reason
        - confidence
        - timestamp

  - step: generate_outbox
    skill: "skills/queue-outbound-dm.ts"
    config:
      maxDMsPerDay: 20
      maxDMsPerUser: 3
      waitBetweenDMs: "30s"
      followUpDelay: "24h"
      outboxDir: ".data/outbox"

  - step: drain_outbox
    adapter: "discord"
    config:
      outboxDir: ".data/outbox"
      sendOnQueue: true
      logBeforeSend: true
      respectRateLimits: true

guardrails:
  maxDMsPerDay: 20
  maxDMsPerUser: 3
  noColdDM: true
  noMassDM: true
  respectStop: true
  rateLimit:
    perMinute: 5
    perHour: 15
    perDay: 20

handover:
  triggers:
    - "Yes, I'm interested"
    - "Send details"
    - "Worth setting up a call"
    - "Need demo"
  pingUser: "Artale"
  channel: "discord"

logging:
  level: "info"
  format: "json"
  rotate: "daily"